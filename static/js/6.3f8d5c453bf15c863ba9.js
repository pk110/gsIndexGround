webpackJsonp([6],{OtZ9:function(e,t){},RZna:function(e,t){},oLMJ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("3Cih"),a={props:{standard:{type:Array}},data:function(){return{tagShow:!1,tagValue:"",tagPropsValue:""}},mounted:function(){},methods:{showInput:function(){var e=this;this.tagShow=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},deleteTag:function(e,t){this.$stamp(null,e),this.$stamp(null,t),this.$delete(this.standard,e),this.$emit("dishesPrice",this.standard)},tagConfirm:function(){var e=this.tagValue;if(0==this.standard.length)e&&this.standard.push({name:e,props:[]}),this.tagShow=!1,this.tagValue="";else{for(var t=!0,s=0;s<this.standard.length;s++)if(this.standard[s].name==e){t=!1;break}1==t?(e&&this.standard.push({name:e,props:[]}),this.tagShow=!1,this.tagValue=""):(this.$message.error("规格名字不能重复!!!"),this.tagShow=!1,this.tagValue="")}this.$emit("dishesPrice",this.standard)},showInputProps:function(e,t){var s=this;this.$set(this.standard,e,{name:t.name,bool:!0,props:t.props}),this.$nextTick(function(e){s.$refs.saveTagPropsInput[0].$refs.input.focus()})},deleteTagProps:function(e,t,s){this.$stamp(null,t),this.$stamp(null,s),this.$delete(this.standard[e].props,t),this.$emit("dishesPrice",this.standard)},tagPropsConfirm:function(e,t){var s=this.tagPropsValue;if(0==this.standard[e].props.length)s&&this.standard[e].props.push({name:t.name,type:s,goStorePrice:"",goHomePrice:"",boxPrice:""}),this.$set(this.standard,e,{name:t.name,bool:!1,props:t.props}),this.tagPropsValue="";else{for(var i=!0,a=0;a<this.standard[e].props.length;a++)if(this.standard[e].props[a].type==s){i=!1;break}1==i?(s&&this.standard[e].props.push({name:t.name,type:s,goStorePrice:"",goHomePrice:"",boxPrice:""}),this.$set(this.standard,e,{name:t.name,bool:!1,props:t.props}),this.tagPropsValue=""):(this.$message.error("规格属性名字不能重复!!!"),this.$set(this.standard,e,{name:t.name,bool:!1,props:t.props}),this.tagPropsValue="")}this.$emit("dishesPrice",this.standard)},dishesPrice:function(){this.$emit("dishesPrice",this.standard)}},computed:{},components:{},created:function(){}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._l(e.standard,function(t,i){return s("el-input",{key:t.name,staticStyle:{width:"80px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入规格"},model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"items.name"}},[s("i",{staticClass:"el-icon-close el-input__icon tag_close",attrs:{slot:"suffix"},on:{click:function(s){e.deleteTag(i,t)}},slot:"suffix"})])}),e._v(" "),e.tagShow?s("el-input",{ref:"saveTagInput",staticStyle:{width:"80px"},attrs:{size:"small"},on:{blur:e.tagConfirm},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.tagConfirm(t):null}},model:{value:e.tagValue,callback:function(t){e.tagValue=t},expression:"tagValue"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 添加")]),e._v(" "),e._l(e.standard,function(t,i){return s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("span",{staticStyle:{"padding-right":"10px"}},[e._v(e._s(t.name)+":")]),e._v(" "),e._l(e.standard[i].props,function(t,a){return s("el-input",{key:a,staticStyle:{width:"80px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入规格属性"},model:{value:t.type,callback:function(s){e.$set(t,"type",s)},expression:"item.type"}},[s("i",{staticClass:"el-icon-close el-input__icon tag_close",attrs:{slot:"suffix"},on:{click:function(s){e.deleteTagProps(i,a,t)}},slot:"suffix"})])}),e._v(" "),t.bool?s("el-input",{ref:"saveTagPropsInput",refInFor:!0,staticStyle:{width:"80px"},attrs:{size:"small"},on:{blur:function(s){e.tagPropsConfirm(i,t)}},nativeOn:{keyup:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13,s.key,"Enter"))return null;e.tagPropsConfirm(i,t)}},model:{value:e.tagPropsValue,callback:function(t){e.tagPropsValue=t},expression:"tagPropsValue"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(s){e.showInputProps(i,t)}}},[e._v("+ 添加")])],2)}),e._v(" "),e._l(e.standard,function(t,i){return s("div",{key:i,staticStyle:{width:"520px"}},[s("el-table",{staticClass:"brandsDishesDetail_price",staticStyle:{width:"100%"},attrs:{data:e.standard[i].props}},[s("el-table-column",{attrs:{prop:"name",align:"center",label:"规格"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(void 0==t.row.type?"":t.row.type)+"\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"自提价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("el-input",{staticClass:"brandsDishesDetail_priceDetail",attrs:{placeholder:"自提价格"},on:{blur:e.dishesPrice},model:{value:void 0==t.row.goStorePrice?"":t.row.goStorePrice,callback:function(s){e.$set(void 0==t.row.goStorePrice?"":t.row,"goStorePrice",s)},expression:"scope.row.goStorePrice == undefined?'':scope.row.goStorePrice"}}),e._v(" "),s("span",[e._v(" 元")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"外卖价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("el-input",{staticClass:"brandsDishesDetail_priceDetail",attrs:{placeholder:"外卖价格"},on:{blur:e.dishesPrice},model:{value:void 0==t.row.goHomePrice?"":t.row.goHomePrice,callback:function(s){e.$set(void 0==t.row.goHomePrice?"":t.row,"goHomePrice",s)},expression:"scope.row.goHomePrice == undefined?'':scope.row.goHomePrice"}}),e._v(" "),s("span",[e._v(" 元")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"餐盒费"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("el-input",{staticClass:"brandsDishesDetail_priceDetail",attrs:{placeholder:"餐盒费"},on:{blur:e.dishesPrice},model:{value:void 0==t.row.boxPrice?"":t.row.boxPrice,callback:function(s){e.$set(void 0==t.row.boxPrice?"":t.row,"boxPrice",s)},expression:"scope.row.boxPrice == undefined?'':scope.row.boxPrice"}}),e._v(" "),s("span",[e._v(" 元")])],1)]}}])})],1)],1)})],2)},staticRenderFns:[]};var n=s("C7Lr")(a,r,!1,function(e){s("OtZ9")},null,null).exports,o={data:function(){return{dishesTags:[{name:"炒鸡"},{name:"嘿嘿"},{name:"渣渣"},{name:"哈哈"}],myDishes:"",dishesVisible:!1,form:{dishes:"",dishesDetail:"",dishesDetailPage:"",tags:[],dishesImg:[],standard:[],dynamicDishes:[]},rules:{dishes:[{required:!0,message:"请输入菜品名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],dishesDetailPage:[{required:!0,message:"请输入详情页地址",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],tags:[{required:!0,message:"请添加菜品标签",trigger:"blur"}],dishesImg:[{required:!0,message:"请添加菜品图片",trigger:"blur"}],dynamicDishes:[{required:!0,message:"请添加食材信息",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;if(0!==this.form.standard.length)for(var s=0;s<this.form.standard.length;s++)for(var i=0;i<this.form.standard[s].props.length;i++)if(""===this.form.standard[s].props[i].goStorePrice||""===this.form.standard[s].props[i].goHomePrice||""===this.form.standard[s].props[i].boxPrice)return this.$message.error("请补全菜品规格信息!!"),!1;console.log(this.form.standard),this.$refs[e].validate(function(e){if(!e)return t.$message.error("error submit!!"),!1;t.$stamp(null,t.form)})},resetForm:function(e){this.standard=[],this.$refs[e].resetFields(),this.$stamp(null,this.form)},handleCloseDishes:function(e){this.form.dynamicDishes.splice(this.form.dynamicDishes.indexOf(e),1)},showInputDishes:function(){var e=this;this.dishesVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInputDishes.$refs.input.focus()})},handleInputConfirmDishes:function(){var e=this.myDishes;e&&this.form.dynamicDishes.push(e),this.dishesVisible=!1,this.myDishes=""},getDishesImg:function(e){this.$stamp(null,e),this.form.dishesImg=e},dishesPrice:function(e){this.$stamp(null,e),this.form.standard=e}},computed:{},components:{imgs:i.a,tag:n},created:function(){this.$stamp(null,this.$route.params.data),this.$route.params.data}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"brandsDishesDetail_head"},[s("router-link",{attrs:{to:"/manager/brandsDishes"}},[s("i",{staticClass:"el-icon-arrow-left"}),e._v(" 返回列表\n    ")])],1),e._v(" "),s("el-form",{ref:"ruleForm",staticClass:"brandsDishesDetail_Box",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"输入菜名:",prop:"dishes"}},[s("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入菜名"},model:{value:e.form.dishes,callback:function(t){e.$set(e.form,"dishes",t)},expression:"form.dishes"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"菜名描述:",prop:"dishesDetail"}},[s("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",placeholder:"请输入菜名描述"},model:{value:e.form.dishesDetail,callback:function(t){e.$set(e.form,"dishesDetail",t)},expression:"form.dishesDetail"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"详情页:",prop:"dishesDetailPage"}},[s("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入链接跳转地址"},model:{value:e.form.dishesDetailPage,callback:function(t){e.$set(e.form,"dishesDetailPage",t)},expression:"form.dishesDetailPage"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"菜品标签:",prop:"tags"}},[s("el-checkbox-group",{model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},e._l(e.dishesTags,function(t){return s("el-checkbox",{key:t.name,attrs:{label:t.name}},[e._v(e._s(t.name))])}))],1),e._v(" "),s("el-form-item",{attrs:{label:"图片:",prop:"dishesImg"}},[s("imgs",{staticClass:"brandsDishesDetail_img",attrs:{files:e.form.dishesImg,limitImg:1},on:{imgFiles:e.getDishesImg}})],1),e._v(" "),s("el-form-item",{attrs:{label:"规格:"}},[s("tag",{attrs:{standard:e.form.standard},on:{dishesPrice:e.dishesPrice}})],1),e._v(" "),s("el-form-item",{attrs:{label:"食材添加:",prop:"dynamicDishes"}},[e._l(e.form.dynamicDishes,function(t){return s("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(s){e.handleCloseDishes(t)}}},[e._v("\n        "+e._s(t)+"\n      ")])}),e._v(" "),e.dishesVisible?s("el-input",{ref:"saveTagInputDishes",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirmDishes},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirmDishes(t):null}},model:{value:e.myDishes,callback:function(t){e.myDishes=t},expression:"myDishes"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInputDishes}},[e._v("添加")])],2),e._v(" "),s("el-form-item",[s("el-button",{staticStyle:{padding:"7px 20px","background-color":"#ff3b21",color:"#fff","border-color":"#ff3b21","border-radius":"30px"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")]),e._v(" "),s("el-button",{staticStyle:{padding:"7px 20px","background-color":"#000",color:"#fff","border-radius":"30px"},on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var c=s("C7Lr")(o,l,!1,function(e){s("RZna")},null,null);t.default=c.exports}});
//# sourceMappingURL=6.3f8d5c453bf15c863ba9.js.map