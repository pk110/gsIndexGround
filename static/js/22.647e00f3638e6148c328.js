webpackJsonp([22],{"F+w6":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("3Cih"),i=e("ag9C"),r={data:function(){return{totalPages:4,pageSize:10,currentPage:1,data:[{tagsImg:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=229445282,848378121&fm=202&mola=new&crop=v1",name:"优质品牌1",products:"102",lastUpdata:"2016-08-09 13:18",edit:!1},{tagsImg:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=229445282,848378121&fm=202&mola=new&crop=v1",name:"优质品牌2",products:"102",lastUpdata:"2016-08-09 13:18",edit:!1},{tagsImg:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=229445282,848378121&fm=202&mola=new&crop=v1",name:"优质品牌3",products:"102",lastUpdata:"2016-08-09 13:18",edit:!1},{tagsImg:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=229445282,848378121&fm=202&mola=new&crop=v1",name:"优质品牌4",products:"102",lastUpdata:"2016-08-09 13:18",edit:!1}],search:"",form:{tagsName:"",tagsImg:[]},rules:{tagsName:[{required:!0,message:"请输入标签名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],tagsImg:[{required:!0,message:"请添加图标",trigger:"blur"}]},tagsBox:!1,fileList:[],currentImgIndex:0,currentData:{}}},methods:{submit:function(t){var a=this;this.$refs[t].validate(function(t){if(!t)return a.$message.error("error submit!!"),!1})},resetForm:function(t){this.$refs[t].resetFields()},edit:function(t,a){for(var e=0;e<this.data.length;e++)e==t?(this.currentData=a,this.$set(this.data,t,{tagsImg:a.tagsImg,name:a.name,products:a.products,lastUpdata:a.lastUpdata,edit:!0})):this.$set(this.data,e,{tagsImg:this.data[e].tagsImg,name:this.data[e].name,products:this.data[e].products,lastUpdata:this.data[e].lastUpdata,edit:!1})},uploadImg:function(t){this.$stamp(null,t),this.currentImgIndex=t},getListTagsImg:function(t){this.fileList.push(t),this.$stamp(null,this.fileList),this.$stamp(null,this.currentImgIndex),this.$set(this.data,this.currentImgIndex,{tagsImg:this.fileList[0].url,name:this.data[this.currentImgIndex].name,products:this.data[this.currentImgIndex].products,lastUpdata:this.data[this.currentImgIndex].lastUpdata,edit:this.data[this.currentImgIndex].edit}),this.fileList=[]},check:function(t,a){if(""==a.name)return this.$message.error("标签名称不能为空"),!1;this.$set(this.data,t,{tagsImg:a.tagsImg,name:a.name,products:a.products,lastUpdata:a.lastUpdata,edit:!1})},cancel:function(t,a){this.$set(this.data,t,{tagsImg:this.currentData.tagsImg,name:this.currentData.name,products:this.currentData.products,lastUpdata:this.currentData.lastUpdata,edit:!1})},close:function(t,a){this.$delete(this.data,t),this.totalPages--},searchTags:function(){this.$stamp(null,this.search)},addTags:function(){this.tagsBox=!0},getCurrentPage:function(t){this.$stamp(null,"获取的当前页数"+t),this.currentPage=t},getTagsImg:function(t){this.$stamp(null,t),this.form.tagsImg=t}},computed:{},components:{imgs:s.a,pages:i.a},created:function(){}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"tags_head"},[e("el-button",{staticStyle:{color:"#fff","background-color":"#ed6f00",padding:"9px 15px","border-radius":"30px"},attrs:{size:"small"},on:{click:t.addTags}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 添加标签")]),t._v(" "),e("el-input",{staticClass:"tags_search",staticStyle:{width:"240px"},attrs:{size:"small",placeholder:"搜索","prefix-icon":"el-icon-search"},on:{blur:t.searchTags},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1),t._v(" "),e("el-table",{staticClass:"tags_table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.data}},[e("el-table-column",{attrs:{label:"图标",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("img",{staticClass:"tags_imgs",attrs:{src:a.row.tagsImg}}),t._v(" "),1==a.row.edit?e("el-upload",{staticClass:"upload_listImg",attrs:{action:"","auto-upload":!1,limit:1,"show-file-list":!1,"on-change":t.getListTagsImg,"file-list":t.fileList}},[e("i",{staticClass:"el-icon-close",on:{click:function(e){t.uploadImg(a.$index)}}})]):e("div")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"名称",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.edit?e("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{size:"mini",placeholder:"请输入标签名称",minlength:"1",maxlength:"10"},model:{value:a.row.name,callback:function(e){t.$set(a.row,"name",e)},expression:"scope.row.name"}}):e("span",[t._v(t._s(a.row.name))])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"包含商品"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n        "+t._s(a.row.products)+"个\n      ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"lastUpdata",align:"center",label:"最后更新时间"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.edit?e("div",{staticClass:"tags_edit",on:{click:function(e){t.edit(a.$index,a.row)}}},[t._v("编辑")]):e("div",{staticClass:"tags_check",on:{click:function(e){t.check(a.$index,a.row)}}},[t._v("确认")]),t._v(" "),0==a.row.edit?e("div",{staticClass:"tags_chose",on:{click:function(e){t.close(a.$index,a.row)}}},[t._v("删除")]):e("div",{staticClass:"tags_cancel",on:{click:function(e){t.cancel(a.$index,a.row)}}},[t._v("取消")])]}}])})],1),t._v(" "),e("pages",{attrs:{pageSize:t.pageSize,totalPages:t.totalPages},on:{changeCurrentPage:t.getCurrentPage}}),t._v(" "),e("el-dialog",{attrs:{title:"发布标签",visible:t.tagsBox,width:"40%",center:""},on:{"update:visible":function(a){t.tagsBox=a}}},[e("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"新增品类:",prop:"tagsName"}},[e("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入品类名称"},model:{value:t.form.tagsName,callback:function(a){t.$set(t.form,"tagsName",a)},expression:"form.tagsName"}}),t._v(" "),e("p",{staticStyle:{color:"#E51C23"}},[t._v("* 品类修改会对商家造成一定影响，新增、删除、修改之前需经过部门领导审批同意")])],1),t._v(" "),e("el-form-item",{attrs:{label:"图标:",prop:"tagsImg"}},[e("imgs",{staticClass:"tags_img",attrs:{files:t.form.tagsImg,limitImg:1},on:{imgFiles:t.getTagsImg}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{"background-color":"#ff3b21",color:"#fff",border:"0",padding:"7px 20px","border-radius":"30px"},attrs:{type:"primary"},on:{click:function(a){t.submit("ruleForm")}}},[t._v("确 定")]),t._v(" "),e("el-button",{staticStyle:{"background-color":"#000",color:"#fff",padding:"7px 20px","border-radius":"30px"},on:{click:function(a){t.resetForm("ruleForm")}}},[t._v("重 置")])],1)],1)],1)},staticRenderFns:[]};var l=e("C7Lr")(r,n,!1,function(t){e("ax1b")},null,null);a.default=l.exports},ax1b:function(t,a){}});
//# sourceMappingURL=22.647e00f3638e6148c328.js.map